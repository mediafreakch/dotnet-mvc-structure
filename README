# Goals

This repository shows a best practice example of how to setup FrontendComponents within a .NET MVC solution.

## Arguments

### Why FrontendComponents should not be used in `Areas`

- `Areas` are a way to structure the Server Side application. A FrontendComponent doesn't necessarily belong to a single Area, it could belong to many.
That would quickly lead to a dependency hell.

### Why there are several `node_modules` folders

- `/Core.UI.WebSite/node_modules` is a storage for public modules, and helps you to distinguish public / private components.

    It also makes sure that you only have 1 instance of a public component within your project. That way you never run into the risk of bundling a module twice.

- `/Core.UI.WebSite/Components/node_modules/` allows you to create internal, private components and re-use them in other private components (in opposite to if you put them in `Areas`)

# Best Practice File Structure

```javascript

/Core.UI.WebSite
    /Areas
        // --> Backend related stuff (incl. server side rendering of views)
        // --> No FrontendComponents here. Does not scale!
    /Components
        // --> Internal FrontendComponents (+ bootstrapping for the main applications)
        // --> why not into /Content ? Clear separation from existing code
        /dist
            // --> the shithole. From where you'll include them in MVC bundles
        /node_modules
            // --> empowers the node require algorithm for wiring internal modules
            qanda/
                // --> Internal module, following the usual file structure pattern
                index.js
                package.json
            tiresearch/
                ...
            tracking/
                // --> Component required from "qanda" and "tiresearch"
        /site-theme
            // --> for theming your project
        /utilities
            // --> stuff needed to build or organize the project. Also gulp tasks could go in here.
        main-bootstrap.js
            // --> That's where we require all the modules
            // --> We can require by name from internal & public modules. Fancy.
        admin-bootstrap.js
            // --> That's how you would create a separate bundle for a specific area.
    /Content
        // --> The only thing that is in here are legacy (existing) code
        // --> Over time, code from in here should move to /Components
    /...
        // --> MVC stuff we don' care
    /node_modules
        // --> That's where public available modules should go (also from npm.qxlricardo.internal)
        // --> Gives us control over what will be bundled and avoid dependency hell (duplication)
    package.json
        // --> The top-most package.json there is. All dependencies and peer dependencies go here
        // --> All the build scripts (npm) go here
```

# Best Practice Build Configuration

There are several criterias to look at when building and bundling the project.

1. We want to use libraries from the Static Server, not bundle them with our application code
2. We want to group internal components used by several bundles into a common bundle

## 1. Shimming modules from our Static server

## 2. Factoring out common bundles automatically
